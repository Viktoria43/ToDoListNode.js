<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/CSS/input.css">
    <title><%= title %></title>
</head>

<h1>Create your list</h1>
<ul>

    <form action='list' method="POST">
        <input type="text" name="title" />
        <input type="submit" name="body"  value="OK" />
    </form>
    <div class="checkbox">
        <ul>
            <% lists.forEach((list) => { %>


                    <h3 ><%= list.title %> <input type="checkbox" class="deletion" name="tasks" data-doc="<%= list._id %>"></h3>


            <% }); %>
        </ul>
    </div>
</ul>
<script>
    const elements = document.querySelectorAll('input.deletion');

for (let i =0;i<elements.length;i++) {
    elements[i].addEventListener('click', (e) => {
        const endpoint = `/list/${  elements[i].dataset.doc}`;
        fetch(endpoint, {
            method: 'DELETE'
        })
            .then((response) => response.json())
            .then((data) => elements[i].parentElement.remove());
    });
}
</script>
</body>
</html>